# Murmansk Family Telegram Bot

Этот бот предназначен для отслеживания времени до определённой даты и управления семейными событиями через Telegram.

## Функционал
- Создание событий с указанием даты и времени
- Динамические команды для каждого события
- Отслеживание времени до события
- Поддержка различных форматов дат
- Работа в личных и групповых чатах
- Структурированное логирование

## Форматы дат
Бот поддерживает следующие форматы дат:
- `YYYY-MM-DD` (например: 2025-12-31)
- `YYYY-MM-DD HH:MM` (например: 2025-12-31 14:30)
- `DD.MM.YYYY` (например: 31.12.2025)
- Короткий формат: `YYYY-M-D` (например: 2025-9-7)

По умолчанию время устанавливается на 00:00, часовой пояс Europe/Moscow.

## Список команд

| Команда                | Описание                                                        |
|-----------------------|-----------------------------------------------------------------|
| /start                | Запуск бота и краткая справка                                   |
| /help                 | Показать справку по командам                                    |
| /set_date <дата> <имя> [описание] | Создать новое событие (пример: /set_date 2025-12-31 new_year Новый год) |
| /list                 | Показать все события                                            |
| /all                  | Показать все события (синоним /list)                            |
| /active               | Показать активные события (будущие даты)                       |
| /outdated             | Показать устаревшие события (прошедшие даты)                   |
| /<имя_события>        | Показать информацию о конкретном событии                       |

## Быстрый старт

### Локальный запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/TheReshkin/tg-bot-family.git
   cd tg-bot-family
   ```

2. Установите зависимости:
   ```bash
   go mod tidy
   ```

3. Создайте файл `.env` с токеном бота:
   ```bash
   echo "TELEGRAM_BOT_TOKEN=your_bot_token_here" > .env
   ```

4. Запустите бота:
   ```bash
   go run ./cmd
   ```

### Запуск через Docker

1. Соберите образ:
   ```bash
   docker build -t murmansk-bot .
   ```

2. Запустите контейнер:
   ```bash
   docker run -e TELEGRAM_BOT_TOKEN=your_token_here murmansk-bot
   ```

### Запуск через Docker Compose

1. Создайте файл `.env` с токеном
2. Запустите:
   ```bash
   docker-compose -f tg-bot.docker-compose.yml up --build
   ```

## Примеры использования

```
/set_date 2025-12-31 new_year "Новый год 2025"
/set_date 2025-09-07 14:30 birthday "День рождения"
/set_date 07.09.2025 vacation "Отпуск"
/new_year
/list
/active
```

## Структура проекта

```
cmd/                    # Точка входа приложения
internal/
  ├── models/          # Модели данных
  ├── services/        # Бизнес-логика
  └── storage/         # Хранение данных
tests/                  # Тесты
  ├── unit/            # Юнит-тесты
  ├── integration/     # Интеграционные тесты
  └── contracts/       # Контрактные тесты
specs/                  # Спецификации и документация
```

## Тестирование

Запуск всех тестов:
```bash
go test ./...
```

Запуск конкретных тестов:
```bash
go test ./tests/unit/
go test ./tests/integration/
```

## Разработка

Проект использует Spec-Driven Development подход:
1. Спецификация требований (`specs/001-project-murmansk-bot/spec.md`)
2. План реализации (`specs/001-project-murmansk-bot/plan.md`)
3. Задачи (`specs/001-project-murmansk-bot/tasks.md`)
4. TDD с контрактными тестами

## Лицензия

MIT License
/specify
 "murmansk-bot: Телеграм бот для записи дат и обратного отсчета в тг". Telegram bot написанный на go, который умеет распознавать команды в тексте сообщений в общих группах так и пресональных чатах с ботом, так и отдельные команды  по добавлению дат и описания к ним (например, /set_date 12.12.2025 new_year) в результате отработки этой команды должна добавиться новая динамическая команда содержащая название этой даты (после обработки разрешенных названий кастомных динамических команд согласно ограничениям ТГ) и выводится информациия об оставшемся до даты времени (например /new_year, должно вывестить описание этого события и время до указанной даты). Бот должен иметь команды (/help, /set_date, /list, /all, /outdated /active). 


